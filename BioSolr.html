---
layout: default
title: BioSolr
group: "in_local_navigation"
order: 2
---
<div class="blurb">
	<h4>A BioSolr Ontology Expansion plugin for Solr</h4>
	<p>This is a short interactive introduction to the BioSolr Ontology Expansion plugin for Solr.</p>
	<p>In this tutorial you will learn how to:</p>
	<ul>
		<li><a href="#install_solr">Install Solr</a></li>
		<li><a href="#index_sample_data">Index some example data with embedded ontology annotations</a></li>
		<li><a href="#search_data">Use an example web application to search this data</a></li>
		<li><a href="#install_biosolr_plugins">Install BioSolr plugins to ontology-enrich your Solr index</a></li>
		<li><a href="#configure_biosolr"></a>Configure BioSolr</li>
		<li><a href="#ontology_powered_search">Perform ontology-powered searches</a></li>
	</ul>
	<h5>Prerequisites</h5>
	<p>Java 8 - both Solr and the example web application rely on Java 8 to run.</p>
	<h5 id="install_solr">Install Solr</h5>
	<p>Download Solr from <a href="http://lucene.apache.org/solr/" target="_blank">http://lucene.apache.org/solr/</a> (Pick .tgz or .zip file as you prefer)</p>
	<p>Unpack the Solr download into your preferred directory - for this demo, we're going to use ~/Applications/solr-5.3.1/</p>
	<p>Once you've done this, verify you can startup Solr:</p>
	<code>>: cd ~/Applications/solr-5.3.1/<br/>
	>: bin/solr start</code>
	<p>Now open a browser and check we can see the Solr admin page at <a href="http://localhost:8983/" target="_blank">http://localhost:8983/</a></p>
	<p>Now we're happy we can run Solr, so let's shut down our Solr server again...</p>
	<code>>: bin/solr stop</code>
	<p>...and now get the extra BioSolr stuff. We'll be using this later in the tutorial</p>
	<p>Check out the code for this demo into your preferred directory - we're going to be using ~/Projects/:</p>
	<code>>: cd ~/Projects<br/>
	>: git clone git@github.com:flaxsearch/BioSolr.git<br/>
	>: cd BioSolr/swat4ls_demo</code>
	<p>We've supplied the required configuration to get us up and running quickly, so let's start a new Solr instance that uses this config:</p>
	<code>>: cd ~/Projects/BioSolr/swat4ls_demo<br/>
	>: export SOLR_DIR=~/Applications/solr-5.3.1<br/>
	>: solr-start.sh</code>
	<p>Now reload your page at <a href="http://localhost:8983/" target="_blank">http://localhost:8983/</a> - this time, you should see a new documents core. If so, great! Now we're ready to start indexing some data.</p>
	<h5 id="index_sample_data">Index some example data with embedded ontology annotations</h5>
	<p>We've supplied some sample data to demonstrate how BioSolr can index information annotated with ontology terms. 
		This data is stored in the file <i>data/gwas-catalog-annotation-data.csv</i> - you can open this file in Excel and take a 
		look at it if you like. You'll see this file contains a column <i>efo_uri</i> which contains annotations to the Experimental 
		Factor Ontology.
	</p>
	<p> For reference: Data is taken from the GWAS Catalog: <a href="http://www.ebi.ac.uk/gwas" target="_blank">http://www.ebi.ac.uk/gwas</a> Ontology information is from the 
		Experimental Factor Ontology: <a href="http://www.ebi.ac.uk/efo" target="_blank">http://www.ebi.ac.uk/efo</a>
	</p>
	<p>Now let's index this data. You can upload CSV files directly to Solr using curl:</p>
	<code>>: curl http://localhost:8983/solr/documents/update --data-binary @data/gwas-catalog-annotation-data.csv -H 'Content-type:application/csv'<br/>
	>: curl http://localhost:8983/solr/documents/update --data '<commit/>' -H 'Content-type:text/xml; charset=utf-8'</code>
	<p>The first command here uploads the data, the second one commits the changes and makes your newly indexed documents visible.</p>
	<p>Now, if you open the admin interface once more and look at the overview of the documents 
		core <a href="http://localhost:8983/solr/#/documents" target="_blank">http://localhost:8983/solr/#/documents</a>, you should see we now have 26,385 documents in our index.
	</p>
	<p>We can also inspect some of the data by browsing to the query page <a href="http://localhost:8983/solr/#/documents/query" target="_blank">http://localhost:8983/solr/#/documents/query</a>
		and running a standard query - you can see that the documents in our index correspond to rows in our spreadsheet.
	</p>
</div><!-- /.blurb -->
